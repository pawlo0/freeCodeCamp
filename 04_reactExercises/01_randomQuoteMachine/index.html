<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ramdon Quote Machine</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <!-- <script src="https://unpkg.com/redux@4.0.1/dist/redux.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/6.0.0/react-redux.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.6/prop-types.min.js"></script> -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  </head>

  <body>
    <div id="App"></div>
    <script type="text/babel">
      // React
      class QuoteBox extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            quote: {}
          };
        }
        componentDidMount() {
          // Retrive quotes from JSON URL
          var self = this;
          const requestURL =
            "https://gist.githubusercontent.com/camperbot/5a022b72e96c4c9585c32bf6a75f62d9/raw/e3c6895ce42069f0ee7e991229064f167fe8ccdc/quotes.json";
          let request = new XMLHttpRequest();
          request.open("GET", requestURL);
          request.responseType = "json";
          request.send();
          let quotesArray = [];
          request.onload = function() {
            request.response.quotes.map(quote => quotesArray.push(quote));
            self.setState({
              quote: quotesArray[Math.floor(Math.random() * quotesArray.length)]
            });
          };
        }
        render() {
          return (
            <div id="quote-box">
              <p id="text">{this.state.quote.quote}</p>
              <p id="author">{this.state.quote.author}</p>
              <button id="new-quote">New Quote</button>
              <button id="tweet-quote">Tweet it</button>
            </div>
          );
        }
      }
      ReactDOM.render(<QuoteBox />, document.getElementById("App"));
    </script>
  </body>
</html>
